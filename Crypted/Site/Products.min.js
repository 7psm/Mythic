document.addEventListener("DOMContentLoaded",()=>{console.log("üöÄ Initialisation de la page Products Test");const e=[{id:1,name:"Nitro Boost 1 mois",category:"nitro",description:"Discord Nitro Boost pour 1 mois. Acc√®s √† toutes les fonctionnalit√©s premium de discord.",price:6,originalPrice:null,image:"",badge:"LEGAL PAID",options:[{name:"Nitro Boost 1 mois",price:6}]},{id:2,name:"Nitro Basic 1 mois",category:"nitro",description:"Discord Nitro Basic pour 1 mois. Acc√®s aux fonctionnalit√©s de base de discord nitro.",price:1.5,originalPrice:null,image:"",badge:"LEGAL PAID",options:[{name:"Nitro Basic 1 mois",price:1.5}]},{id:3,name:"Server Boost 1 mois x14",category:"boost",description:"14 Server Boosts pour votre serveur Discord pendant 1 mois.",price:15,originalPrice:null,image:"",badge:"LEGAL PAID",options:[{name:"Server Boost 1 mois x14",price:15}]},{id:4,name:"Server Boost 1 mois x17",category:"boost",description:"17 Server Boosts pour votre serveur Discord pendant 1 mois.",price:19,originalPrice:null,image:"",badge:"LEGAL PAID",options:[{name:"Server Boost 1 mois x17",price:19}]},{id:5,name:"Server Boost 1 mois x20",category:"boost",description:"20 Server Boosts pour votre serveur Discord pendant 1 mois.",price:24,originalPrice:null,image:"/public/normal/20euro.png",badge:"LEGAL PAID",options:[{name:"Server Boost 1 mois x20",price:24}]},{id:6,name:"Server Boost 3 mois x14",category:"boost",description:"14 Server Boosts pour votre serveur Discord pendant 3 mois.",price:30,originalPrice:null,image:"",badge:"LEGAL PAID",options:[{name:"Server Boost 3 mois x14",price:30}]},{id:7,name:"Server Boost 3 mois x17",category:"boost",description:"17 Server Boosts pour votre serveur Discord pendant 3 mois.",price:34,originalPrice:null,image:"",badge:"LEGAL PAID",options:[{name:"Server Boost 3 mois x17",price:34}]},{id:8,name:"Server Boost 3 mois x20",category:"boost",description:"20 Server Boosts pour votre serveur Discord pendant 3 mois.",price:38,originalPrice:null,image:"",badge:"LEGAL PAID",options:[{name:"Server Boost 3 mois x20",price:38}]},{id:9,name:"Avatar D√©coration",category:"decoration",description:"D√©coration d'avatar Discord. Prix r√©duit par rapport au prix officiel.",price:2.5,originalPrice:2.99,image:"",badge:"PROMO",discount:"-22%",options:[{name:"Avatar D√©coration 2.99‚Ç¨",price:2.5,originalPrice:2.99},{name:"Avatar D√©coration 3.99‚Ç¨",price:3.2,originalPrice:3.99},{name:"Avatar D√©coration 4.99‚Ç¨",price:4,originalPrice:4.99},{name:"Avatar D√©coration 5.49‚Ç¨",price:4.25,originalPrice:5.49},{name:"Avatar D√©coration 6.99‚Ç¨",price:5.5,originalPrice:6.99},{name:"Avatar D√©coration 8.99‚Ç¨",price:6.75,originalPrice:8.99},{name:"Avatar D√©coration 9.99‚Ç¨",price:8,originalPrice:9.99},{name:"Avatar D√©coration 11.99‚Ç¨",price:9,originalPrice:11.99}]},{id:10,name:"Online Members Discord x1000",category:"members",description:"1000 membres en ligne pour votre serveur Discord. Profils r√©alistes avec avatars, pseudo, HypeSquad, bio.",price:8,originalPrice:null,image:"",badge:"LEGAL PAID",options:[{name:"Offline Members Discord x1000",price:8},{name:"Online Members Discord x1000",price:7}]},{id:11,name:"Offline Members Discord x1000",category:"members",description:"1000 membres en ligne pour votre serveur Discord. Profils r√©alistes avec avatars, pseudo, HypeSquad, bio.",price:7,originalPrice:null,image:"",badge:"LEGAL PAID",options:[{name:"Offline Members Discord x1000",price:7},{name:"Online Members Discord x1000",price:8}]},{id:12,name:"Spotify Premium (Compte perso)",category:"accounts",description:"Spotify Premium est un abonnement payant qui offre une √©coute sans publicit√©, une meilleure qualit√© audio, la lecture hors-ligne et la possibilit√© de choisir n‚Äôimporte quel titre √† tout moment.",price:25,originalPrice:72.84,image:"",badge:"LEGAL PAID",options:[{name:"Spotify Premium (Compte perso) 6 mois",price:25,originalPrice:72.84},{name:"Spotify Premium (Compte perso) 12 mois",price:40,originalPrice:145.58}]},{id:13,name:"Spotify Premium (Nouveau Compte)",category:"accounts",description:"Spotify Premium est un abonnement payant qui offre une √©coute sans publicit√©, une meilleure qualit√© audio, la lecture hors-ligne et la possibilit√© de choisir n‚Äôimporte quel titre √† tout moment.",price:7,originalPrice:12.14,image:"",badge:"LEGAL PAID",options:[{name:"Spotify Premium (Nouveau Compte) 1 mois",price:5,originalPrice:12.14},{name:"Spotify Premium (Nouveau Compte) 3 mois",price:12,originalPrice:36.42},{name:"Spotify Premium (Nouveau Compte) 6 mois",price:20,originalPrice:72.84},{name:"Spotify Premium (Nouveau Compte) 12 mois",price:30,originalPrice:145.58}]},{id:14,name:"Youtube Premium (Compte perso) 6 mois",category:"accounts",description:"YouTube Premium est un service d‚Äôabonnement payant qui offre une exp√©rience YouTube sans publicit√©, la lecture en arri√®re-plan, le t√©l√©chargement de vid√©os pour une visualisation hors ligne et l‚Äôacc√®s √† YouTube Music Premium.",price:40,originalPrice:143.88,image:"",badge:"LEGAL PAID",options:[{name:"Youtube Premium (Compte perso) 6 mois",price:40,originalPrice:143.88}]},{id:15,name:"Youtube Premium (Nouveau Compte)",category:"accounts",description:"YouTube Premium est un service d‚Äôabonnement payant qui offre une exp√©rience YouTube sans publicit√©, la lecture en arri√®re-plan, le t√©l√©chargement de vid√©os pour une visualisation hors ligne et l‚Äôacc√®s √† YouTube Music Premium.",price:5,originalPrice:12.99,image:"",badge:"LEGAL PAID",options:[{name:"Youtube Premium 1 mois",price:5,originalPrice:12.99},{name:"Youtube Premium 3 mois",price:15,originalPrice:38.97},{name:"Youtube Premium 6 mois",price:25,originalPrice:77.94},{name:"Youtube Premium 12 mois",price:40,originalPrice:155.88}]},{id:16,name:"Crunchyroll (Nouveau Compte)",category:"accounts",description:"Crunchyroll est un service de streaming sp√©cialis√© dans les anime, offrant une vaste biblioth√®que de s√©ries et de films japonais avec des sous-titres dans plusieurs langues.",price:5,originalPrice:7.99,image:"",badge:"LEGAL PAID",options:[{name:"Crunchyroll (Nouveau Compte) 1 mois",price:5,originalPrice:7.99},{name:"Crunchyroll (Nouveau Compte) 3 mois",price:12,originalPrice:17.99},{name:"Crunchyroll (Nouveau Compte) 6 mois",price:22,originalPrice:35.94},{name:"Crunchyroll (Nouveau Compte) 12 mois",price:40,originalPrice:55.99}]},{id:17,name:"NordVPN (Nouveau Compte) 12 mois",category:"accounts",description:"NordVPN est un service de r√©seau priv√© virtuel (VPN) qui offre une connexion s√©curis√©e et priv√©e √† Internet en chiffrant les donn√©es des utilisateurs et en masquant leur adresse IP.",price:29,originalPrice:59.88,image:"",badge:"LEGAL PAID",options:[{name:"NordVPN (Nouveau Compte) 12 mois",price:29,originalPrice:59.88}]}];let i="recent",t=[...e];const r=document.getElementById("products-grid"),o=document.querySelector(".sort-select"),n=document.getElementById("product-modal"),a=document.getElementById("modal-body");function s(){if(r.innerHTML="",0===t.length)return void(r.innerHTML='\n        <div class="col-span-full text-center py-10 text-discord-text-muted">\n          <i class="fas fa-search text-5xl mb-5 opacity-50"></i>\n          <p>Aucun produit trouv√©</p>\n        </div>\n      ');const e={nitro:{name:"Discord Nitro",icon:"‚ö°",gradient:"from-[#5865f2] to-[#7289da]",products:[]},boost:{name:"Server Boost",icon:"üöÄ",gradient:"from-[#f093fb] to-[#f5576c]",products:[]},decoration:{name:"Avatar Decorations",icon:"‚ú®",gradient:"from-[#43e97b] to-[#38f9d7]",products:[]},members:{name:"Discord Members",icon:"üë•",gradient:"from-[#fa709a] to-[#fee140]",products:[]},accounts:{name:"Accounts",icon:"üéµ",gradient:"from-[#30cfd0] to-[#330867]",products:[]}};t.forEach(i=>{e[i.category]&&e[i.category].products.push(i)}),Object.keys(e).forEach(i=>{const t=e[i];if(0===t.products.length)return;const o=document.createElement("div");o.className="col-span-full mb-4 mt-8 first:mt-0",o.innerHTML=`\n        <div class="relative bg-gradient-to-r ${t.gradient} rounded-xl p-6 overflow-hidden group hover:scale-[1.01] transition-transform duration-300">\n          \x3c!-- Background pattern --\x3e\n          <div class="absolute inset-0 opacity-20">\n            <div class="absolute inset-0" style="background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.1) 10px, rgba(255,255,255,0.1) 20px);"></div>\n          </div>\n          \n          \x3c!-- Glowing orb effect --\x3e\n          <div class="absolute top-1/2 right-8 -translate-y-1/2 w-32 h-32 bg-white/20 rounded-full blur-2xl group-hover:scale-125 transition-transform duration-500"></div>\n          \n          \x3c!-- Content --\x3e\n          <div class="relative z-10 flex items-center gap-4">\n            <div class="text-4xl transform group-hover:scale-110 transition-transform duration-300">${t.icon}</div>\n            <div>\n              <h3 class="text-2xl font-black text-white tracking-tight">${t.name}</h3>\n              <p class="text-white/80 text-sm font-medium">${t.products.length} produit${t.products.length>1?"s":""} disponible${t.products.length>1?"s":""}</p>\n            </div>\n          </div>\n          \n          \x3c!-- Decorative corner --\x3e\n          <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-bl-full transform translate-x-16 -translate-y-16"></div>\n        </div>\n      `,r.appendChild(o),t.products.forEach(e=>{const i=function(e){const i=document.createElement("div");i.className="bg-discord-bg rounded-lg overflow-hidden cursor-pointer transition-all duration-200 border border-white/10 hover:-translate-y-1 hover:shadow-2xl hover:border-white/20 relative",i.dataset.productId=e.id,i.dataset.category=e.category;const t=e.discount?`<span class="absolute top-3 right-3 bg-red-500/95 text-white px-2.5 py-1 rounded text-[10px] font-bold uppercase tracking-wider z-10 backdrop-blur-sm shadow-lg">${e.discount}</span>`:"",r=e.originalPrice?`<span class="text-sm text-discord-text-muted line-through ml-1">‚Ç¨${e.originalPrice.toFixed(2)}</span>`:"",o=e.discount?` <span class="text-xs text-discord-text-muted font-medium">(${e.discount})</span>`:"",s=["linear-gradient(135deg, #5865f2 0%, #ff6b6b 100%)","linear-gradient(135deg, #ff6b6b 0%, #ffa500 100%)","linear-gradient(135deg, #5865f2 0%, #4ecdc4 100%)","linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%)","linear-gradient(135deg, #10b981 0%, #3b82f6 100%)","linear-gradient(135deg, #f59e0b 0%, #ef4444 100%)","linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)","linear-gradient(135deg, #ec4899 0%, #f59e0b 100%)","linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%)","linear-gradient(135deg, #ef4444 0%, #f97316 100%)","linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%)","linear-gradient(135deg, #10b981 0%, #3b82f6 100%)"],l=s[e.id%s.length];return i.innerHTML=`\n      <div class="w-full h-[300px] flex items-center justify-center relative overflow-hidden bg-cover bg-center" style="background: ${l};">\n        <div class="absolute inset-0 opacity-60 z-[1]" style="background: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255, 255, 255, 0.03) 10px, rgba(255, 255, 255, 0.03) 20px), repeating-linear-gradient(-45deg, transparent, transparent 10px, rgba(0, 0, 0, 0.05) 10px, rgba(0, 0, 0, 0.05) 20px);"></div>\n        ${t}\n      </div>\n      <div class="p-4 bg-discord-bg">\n        <h3 class="text-base font-semibold text-discord-text mb-2 leading-tight">${e.name}</h3>\n        <div class="flex justify-between items-center mt-0 pt-0">\n          <div class="flex flex-row items-baseline gap-1.5">\n            <span class="text-lg font-bold text-discord-text">‚Ç¨${e.price.toFixed(2)}${o}</span>\n            ${r}\n          </div>\n        </div>\n      </div>\n    `,i.addEventListener("click",()=>{!function(e){const i=e.options&&e.options.length>0?e.options[0].price:e.price,t=(.8*i).toFixed(2),r=["linear-gradient(135deg, #667eea 0%, #764ba2 100%)","linear-gradient(135deg, #f093fb 0%, #f5576c 100%)","linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)","linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)","linear-gradient(135deg, #fa709a 0%, #fee140 100%)","linear-gradient(135deg, #30cfd0 0%, #330867 100%)","linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)","linear-gradient(135deg, #ff9a56 0%, #ff6a88 100%)","linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)","linear-gradient(135deg, #ff6e7f 0%, #bfe9ff 100%)","linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%)","linear-gradient(135deg, #f77062 0%, #fe5196 100%)"],o=r[e.id%r.length];let s="";e.options&&e.options.length>1&&(s=`\n      <div class="mb-6">\n        <label class="block text-white text-sm font-semibold mb-3">Choisir une option :</label>\n        <select id="product-option-select" class="w-full bg-[#1a1a1a] border border-white/20 rounded-xl px-4 py-3 text-white text-sm focus:outline-none focus:border-[#667eea] focus:ring-2 focus:ring-[#667eea]/50 transition-all cursor-pointer hover:border-white/30 appearance-none" style="background-image: url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 24 24%27 fill=%27none%27 stroke=%27white%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27%3e%3cpolyline points=%276 9 12 15 18 9%27%3e%3c/polyline%3e%3c/svg%3e'); background-repeat: no-repeat; background-position: right 0.7rem center; background-size: 1.2em; padding-right: 2.5rem;">\n          ${e.options.map((e,i)=>`\n            <option value="${i}" data-price="${e.price}" style="background-color: #1a1a1a; color: white; padding: 10px;">${e.name} - ‚Ç¨${e.price.toFixed(2)}</option>\n          `).join("")}\n        </select>\n      </div>\n    `);a.innerHTML=`\n    <div class="relative w-full min-h-[600px] flex flex-col lg:flex-row overflow-hidden bg-[#0f0f0f]">\n      \n      \x3c!-- LEFT PANEL: Content --\x3e\n      <div class="relative lg:w-2/5 bg-gradient-to-br from-[#1a1a1a] to-[#0a0a0a] p-8 lg:p-10 flex flex-col justify-between order-2 lg:order-1">\n        <div class="flex-1">\n          <div class="mb-6">\n            <div class="inline-block px-3 py-1 bg-white/10 backdrop-blur-md rounded-lg border border-white/20 text-white/90 text-xs font-semibold mb-3 shadow-lg">\n              Premium Product\n            </div>\n            <h2 class="text-white text-4xl font-black leading-tight tracking-tight">${e.name}</h2>\n          </div>\n          \n          <div class="bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-5 mb-6 shadow-xl">\n            <p class="text-[#c4c4c4] text-sm leading-relaxed">${e.description}</p>\n          </div>\n\n          \x3c!-- Options selector (if multiple options) --\x3e\n          ${s}\n          \n          <div class="flex flex-wrap gap-2 mb-6">\n            <span class="px-3 py-1.5 bg-emerald-500/10 border border-emerald-500/20 rounded-lg text-emerald-400 text-xs font-semibold">‚úì livraison 2 √† 6h max</span>\n            <span class="px-3 py-1.5 bg-blue-500/10 border border-blue-500/20 rounded-lg text-blue-400 text-xs font-semibold">‚úì 24/7 Support</span>\n            <span class="px-3 py-1.5 bg-purple-500/10 border border-purple-500/20 rounded-lg text-purple-400 text-xs font-semibold">‚úì Paiment s√©curis√©</span>\n            <span class="px-3 py-1.5 bg-yellow-500/10 border border-yellow-500/20 rounded-lg text-yellow-400 text-xs font-semibold">‚úì Produit authentique</span>\n          </div>\n        </div>\n\n        <div>\n          <div class="relative mb-6 p-[2px] rounded-2xl bg-gradient-to-r from-[#667eea] via-[#764ba2] to-[#667eea] animate-gradient-xy">\n            <div class="bg-[#1a1a1a] rounded-2xl p-5">\n              <div class="flex items-baseline gap-3 mb-3">\n                <span id="modal-price-display" class="text-white text-5xl font-black tracking-tight">‚Ç¨${i.toFixed(2)}</span>\n                ${e.originalPrice?`<span class="text-gray-500 text-xl line-through">‚Ç¨${e.originalPrice.toFixed(2)}</span>`:""}\n              </div>\n              \n              <div class="nitro-price-container relative group cursor-help">\n                <div class="flex items-center gap-2 text-sm">\n                  <div class="w-6 h-6 flex items-center justify-center flex-shrink-0">\n                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                      <defs>\n                        <linearGradient id="nitroGradient" x1="0%" y1="0%" x2="100%" y2="100%">\n                          <stop offset="0%" style="stop-color:#5865F2;stop-opacity:1" />\n                          <stop offset="100%" style="stop-color:#7289DA;stop-opacity:1" />\n                        </linearGradient>\n                      </defs>\n                      <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="url(#nitroGradient)" stroke="url(#nitroGradient)" stroke-width="0.5"/>\n                      <path d="M12 7L13.5 10.5L17 12L13.5 13.5L12 17L10.5 13.5L7 12L10.5 10.5L12 7Z" fill="white" opacity="0.9"/>\n                    </svg>\n                  </div>\n                  <span class="text-gray-400 font-medium">‚Ç¨<span id="modal-nitro-price">${t}</span> <span class="text-[#5865F2] font-semibold">with ClientCare+</span></span>\n                </div>\n                \n                <div class="absolute bottom-full left-0 mb-3 hidden group-hover:block w-56 z-50">\n                  <div class="bg-gradient-to-br from-[#1a1a1a] to-[#0f0f0f] border border-white/10 text-white text-xs rounded-xl p-4 shadow-2xl backdrop-blur-xl">\n                    <div class="font-semibold mb-1">üíé ClientCare & ClientCare+</div>\n                    <div class="text-gray-400">Les abonn√©s b√©n√©ficient d'une r√©duction sur ce produit.</div>\n                    <div class="absolute -bottom-1.5 left-6 w-3 h-3 bg-[#1a1a1a] border-r border-b border-white/10 rotate-45"></div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <button class="modal-buy-button group relative w-full bg-gradient-to-r from-[#667eea] to-[#764ba2] hover:from-[#764ba2] hover:to-[#667eea] text-white px-8 py-4 rounded-xl font-bold text-lg transition-all duration-300 overflow-hidden shadow-2xl hover:shadow-[0_0_40px_rgba(102,126,234,0.6)] hover:scale-[1.02] active:scale-[0.98]" data-product-id="${e.id}">\n            <span class="relative z-10 flex items-center justify-center gap-3">\n              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>\n              </svg>\n              <span id="modal-buy-text">Purchase for ‚Ç¨${i.toFixed(2)}</span>\n            </span>\n            \n            <div class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity">\n              <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"></div>\n            </div>\n            \n            <div class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity blur-xl bg-gradient-to-r from-[#667eea] to-[#764ba2]"></div>\n          </button>\n          \n          <div class="flex items-center justify-center gap-4 mt-5 text-xs text-gray-500">\n            <div class="flex items-center gap-1.5">\n              <i class="fas fa-shield-alt text-emerald-500"></i>\n              <span>Paiment S√©curis√©</span>\n            </div>\n            <div class="flex items-center gap-1.5">\n              <i class="fas fa-lock text-blue-500"></i>\n              <span>Crypt√©</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      \x3c!-- RIGHT PANEL: Background --\x3e\n      <div class="relative lg:w-3/5 h-[320px] lg:h-auto overflow-hidden order-1 lg:order-2">\n        <div class="absolute inset-0 z-0" style="background: ${o};">\n          <div class="absolute inset-0 opacity-60 animate-gradient"></div>\n          <div class="absolute top-[10%] left-[15%] w-40 h-40 bg-white/10 rounded-full blur-3xl animate-float"></div>\n          <div class="absolute bottom-[20%] right-[20%] w-56 h-56 bg-white/15 rounded-full blur-3xl animate-float-delayed"></div>\n          <div class="absolute inset-0 opacity-[0.03] mix-blend-overlay" style="background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.9%22 numOctaves=%224%22 /%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22/%3E%3C/svg%3E');"></div>\n        </div>\n        \n        <div class="absolute top-5 right-5 z-40">\n          <button class="modal-close-btn group w-11 h-11 rounded-xl bg-black/40 hover:bg-black/60 backdrop-blur-xl border border-white/10 hover:border-white/20 flex items-center justify-center text-white/70 hover:text-white transition-all duration-300 shadow-2xl hover:scale-110">\n            <i class="fas fa-times text-lg"></i>\n          </button>\n        </div>\n        \n        <div class="absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent z-10"></div>\n      </div>\n    </div>\n  `;const l=a.querySelector("#product-option-select");l&&l.addEventListener("change",i=>{const t=i.target.value,r=e.options[t].price,o=(.8*r).toFixed(2);document.getElementById("modal-price-display").textContent=`‚Ç¨${r.toFixed(2)}`,document.getElementById("modal-nitro-price").textContent=o,document.getElementById("modal-buy-text").textContent=`Purchase for ‚Ç¨${r.toFixed(2)}`});a.querySelector(".modal-buy-button").addEventListener("click",()=>{let i;if(l){const t=l.value;i=e.options[t]}else i=e.options[0];!function(e,i){try{const t=JSON.parse(localStorage.getItem("cart")||"[]"),r={nitro:"/public/products/banners/Nitro.png",boost:"/public/products/banners/discord.png",decoration:"/public/products/banners/Discord_Avatar.png",members:"/public/products/banners/Discord_Members.png",accounts:"/public/products/banners/Crunchyroll.png"},o={id:Date.now().toString(),name:i?.name||e.name,price:i?.price||e.price,quantity:1,image:e.image||r[e.category]||"/public/logo.png",category:e.category},n=t.findIndex(e=>e.name===o.name&&Math.abs(e.price-o.price)<.01);-1!==n?t[n].quantity+=1:t.push(o),localStorage.setItem("cart",JSON.stringify(t)),d(),function(e,i,t){const r=document.getElementById("toast-container"),o=document.createElement("div");o.className="relative bg-gradient-to-r from-[#667eea] to-[#764ba2] text-white rounded-xl shadow-2xl overflow-hidden transform translate-x-full opacity-0 mb-3",o.style.animation="slideInRight 0.4s ease-out forwards",o.innerHTML=`\n    <div class="relative p-4 flex items-center gap-4">\n      \x3c!-- Icon --\x3e\n      <div class="flex-shrink-0 w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm">\n        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>\n        </svg>\n      </div>\n      \n      \x3c!-- Content --\x3e\n      <div class="flex-1 min-w-0">\n        <div class="font-bold text-sm mb-0.5">Ajout√© au panier !</div>\n        <div class="text-white/80 text-xs truncate">${e}</div>\n        <div class="text-white/90 text-sm font-semibold mt-1">${i}x ‚Ç¨${t.toFixed(2)}</div>\n      </div>\n      \n      \x3c!-- Close button --\x3e\n      <button onclick="this.closest('.relative').remove()" class="flex-shrink-0 w-8 h-8 rounded-lg bg-white/10 hover:bg-white/20 flex items-center justify-center transition-colors">\n        <i class="fas fa-times text-sm"></i>\n      </button>\n      \n      \x3c!-- Progress bar --\x3e\n      <div class="absolute bottom-0 left-0 right-0 h-1 bg-white/20">\n        <div class="h-full bg-white/50 animate-shrink"></div>\n      </div>\n    </div>\n  `,r.appendChild(o),setTimeout(()=>{o.style.animation="slideOutRight 0.4s ease-out forwards",setTimeout(()=>o.remove(),400)},3500)}(o.name,o.quantity,o.price),console.log("‚úÖ Produit ajout√© au panier:",o)}catch(e){console.error("‚ùå Erreur lors de l'ajout au panier:",e),alert("Erreur lors de l'ajout au panier. Veuillez r√©essayer.")}}(e,i),c()});a.querySelector(".modal-close-btn").addEventListener("click",e=>{e.stopPropagation(),c()}),n.classList.add("active")}(e)}),i}(e);r.appendChild(i)})})}function l(){let r=[...e];r.sort((e,t)=>{switch(i){case"price-asc":return e.price-t.price;case"price-desc":return t.price-e.price;case"name":return e.name.localeCompare(t.name);default:return t.id-e.id}}),t=r,s()}function c(){n.classList.remove("active")}function d(){try{const e=JSON.parse(localStorage.getItem("cart")||"[]").reduce((e,i)=>e+(i.quantity||0),0),i=document.querySelector(".cart-count");i&&(i.textContent=e,i.style.display=e>0?"flex":"none")}catch(e){console.error("Erreur mise √† jour compteur panier:",e)}}o&&o.addEventListener("change",e=>{i=e.target.value,l()}),n.addEventListener("click",e=>{e.target===n&&c()}),d(),l(),s(),console.log("‚úÖ Page Products Test initialis√©e")});